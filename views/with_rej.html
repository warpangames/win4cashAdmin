<%-  include("include/header.ejs") -%>
  <main id="main" class="main">
    <div class="pagetitle">
      <h1>Data Tables</h1>
      
    </div><!-- End Page Title -->
    <div class="d-flex" style="justify-content: flex-end;">
      <!-- <button class="btn btn-sm btn-success m-1" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Add +</button> -->
    </div>
    <section class="section">
      <div class="row">
        <div class="col-lg-12">

          <div class="card">
            <div class="card-body">
            
              <!-- Table with stripped rows -->
              <table class="table datatable" id="withdrawTable1">
                <thead>
                  <tr>
                    <th scope="col">S.No.</th>
                    <th scope="col">Mobile</th>
                    <th scope="col">Username</th>
                    <th scope="col">Amount</th>
                    <th scope="col">BankName</th>
                    <th scope="col">IFSC</th>
                    <th scope="col">Acc.No</th>
                    <th scope="col">Date</th>
                    <th scope="col">status</th>
                </tr>
                </thead>
                <tbody>
                
              </tbody>
              </table>
             
            </div>
          </div>

        </div>
      </div>
      <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
        const tableBody = document.querySelector('#withdrawTable1 tbody');
      
        fetch('http://localhost:7000/admin/rejectreq')
          .then(response => response.json())
          .then(data => {
            console.log(data,'data');
            data.forEach((user,index) => {
              // user.forEach(withdraw => {
                if (true) {
                  const tableRow = document.createElement('tr');
                  tableRow.innerHTML = `
                    <td>${index+1}</td>
                    <td>${user.details[0].phoneno}</td>
                    <td>${user.Username}</td>
                    <td id="withdrawAmount">${user.Requestedammount}</td>
                    <td>${user.details[0].bankname}</td>
                    <td>${user.details[0].IFSC||'0'}</td>
                    <td>${user.details[0].Accountno}</td>
                    <td>${user.createdAt}</td>
                    <td>${user.satuts}</td>
                    
                    <!-- Add any additional columns or actions here -->
                  `;
                  // const pencilIcon = tableRow.querySelector('.bi-pencil-square');
                  // pencilIcon.addEventListener('click', function () {
                  //   const userId = pencilIcon.getAttribute('data-id');
                  //   const selectedRowData = JSON.parse(pencilIcon.getAttribute('data-row'));
                  //   const amountElement = tableRow.querySelector('#withdrawAmount');
                  //   const amount = amountElement.textContent; // Get the text content of the element
                   
                  //   // console.log('Amount:', amount);
                  //   // Trigger the modal display
                  //   $('#exampleModal1').modal('show');
                  //   // alert(amount)
                  //   // Update the selected data in the modal when the "Save" button is clicked
                  //   const saveButton = document.getElementById('saveButton');
                    
                  //   saveButton.addEventListener('click', function () {
                  //     const selectedOption = document.getElementById('inputState').value;
                  //     handleModalFormSubmission(selectedOption, selectedRowData, userId, amount);
                  //   });
                  // });
                  tableBody.appendChild(tableRow);
                }
              // });
            });
          })
          .catch(error => console.error('Error fetching data:', error));
      });
      </script>
    </section>
<!-- deltet modal -->
<div class="text-center">
  <!-- Button HTML (to Trigger Modal) -->
  <!-- <a >Click to Open Confirm Modal</a> -->
</div>

<!-- Modal HTML -->
<div class="de">
<div id="myModal" class="modal fade">
  <div class="modal-dialog modal-confirm">
    <div class="modal-content">
    <i class="bi bi-exclamation-circle text-danger" style="font-size:2rem"></i>
      <!-- <div class="modal-header">
        <div class="icon-box">
          <i class="bi bi-twitter-x">X</i>
          <i class="material-icons"></i>
        </div>
        <h4 class="modal-title">Are you sure?</h4>
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      </div> -->
      <div class="modal-body">
        <p>Do you really want to delete these records? This process cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger">Delete</button>
      </div>
    </div>
  </div>
</div>
</div>
<!-- deltet modal -->



<!-- START Modal ADD LOBBIES -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Lobbies</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="">
          <div class="mb-3">
            <label for="formGroupExampleInput" class="form-label">Action</label>
            <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Bot">
          </div>
          <button class="btn btn-success">Save</button>
       </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
      </div>
    </div>
  </div>
</div>
<!--end Modal ADD LOBBIES -->

<!-- START Modal edit LOBBIES -->
<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Lobbies</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="">
        <div class="form-group col-md-12 mb-3">
           <label for="inputState">Action</label>
           <select id="inputState" class="form-control">
             <option selected>Choose...</option>
             <option>approval</option>
             <option>Reject</option>
           </select>
         </div>
          <!-- <div class="mb-3">
            <label for="formGroupExampleInput2" class="form-label">Action</label>
            <input type="text" class="form-control" id="formGroupExampleInput2" placeholder="Min Entry">
          </div> -->
          <button class="btn btn-success">Save</button>
       </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
      </div>
    </div>
  </div>
</div>
<!--end Modal edit LOBBIES -->


  </main><!-- End #main -->
  <!-- <script src="assets/js/main.js"></script> -->
  
<%- include("include/footer.ejs") -%>